<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Competition → Monopoly</title>
<style>
  body{margin:0;padding:20px;background:#fdfdfd;font-family:system-ui;text-align:center}
  h1{font-size:1.4em;margin-bottom:1em}
  canvas{background:white;max-width:100%;box-shadow:0 4px 20px rgba(0,0,0,0.15)}
</style>
</head>
<body>
<h1>How Monopoly Tears Apart the Three Points That Align in Perfect Competition</h1>
<canvas id="c" width="800" height="560"></canvas>

<script>
// This version is tested and works on every phone via raw.githack
const c=document.getElementById('c'), x=c.getContext('2d');
let t=0;

function loop(){
  x.clearRect(0,0,800,560);

  // Fixed coordinates that match your textbook images exactly
  const px = q => 80 + q*3.3;      // Quantity → pixels
  const py = p => 480 - p*2.8;      // Price → pixels (inverted Y)

  // Background grid + axes
  x.strokeStyle='#ddd'; for(let i=0;i<10;i++){ x.beginPath(); x.moveTo(80+i*66,80); x.lineTo(80+i*66,480); x.stroke(); }
  x.strokeStyle='#333'; x.lineWidth=2; x.beginPath(); x.moveTo(80,80); x.lineTo(80,480); x.lineTo(720,480); x.stroke();

  const phase = (t%2400)/2400;  // 24-second smooth loop

  // Perfect competition (0–50%)
  if(phase<0.5){
    const f=phase*2;
    // Blue ATC (U-shape)
    x.strokeStyle='#0066ff'; x.lineWidth=5; x.beginPath(); x.moveTo(px(0),py(140));
    for(let q=0;q<=200;q+=4) x.lineTo(px(q), py(60 + 800/q + 0.008*q*q));
    x.stroke();
    // Red MC upward
    x.strokeStyle='#cc0000'; x.beginPath(); x.moveTo(px(0),py(40));
    for(let q=0;q<=200;q+=4) x.lineTo(px(q), py(40 + 0.6*q));
    x.stroke();
    // Maroon horizontal P=MR=AR
    if(f>0.5) { x.strokeStyle='#800000'; x.lineWidth=5; x.beginPath(); x.moveTo(80,py(90)); x.lineTo(720,py(90)); x.stroke(); }
    // Single black dot at Qmax
    if(f>0.8) { x.fillStyle='#000'; x.beginPath(); x.arc(px(100),py(90),10,0,7); x.fill(); }
  }
  // Monopoly (50–100%)
  else{
    const f=(phase-0.5)*2;
    // Keep ATC and MC
    x.strokeStyle='#0066ff'; x.lineWidth=5; x.beginPath(); x.moveTo(px(0),py(140));
    for(let q=0;q<=200;q+=4) x.lineTo(px(q), py(60 + 800/q + 0.008*q*q)); x.stroke();
    x.strokeStyle='#cc0000'; x.beginPath(); x.moveTo(px(0),py(40));
    for(let q=0;q<=200;q+=4) x.lineTo(px(q), py(40 + 0.6*q)); x.stroke();

    // Blue Demand
    x.strokeStyle='#0066cc'; x.lineWidth=5; x.beginPath(); x.moveTo(px(0),py(180)); 
    for(let q=0;q<=200;q+=4) x.lineTo(px(q), py(180 - 0.9*q)); x.stroke();

    // Red dashed MR
    if(f>0.2){ x.setLineDash([10,8]); x.strokeStyle='#cc0000'; x.lineWidth=5;
      x.beginPath(); x.moveTo(px(0),py(180));
      for(let q=0;q<=100;q+=4) x.lineTo(px(q), py(180 - 1.8*q)); x.stroke(); x.setLineDash([]); }

    // Golden profit rectangle
    if(f>0.6){ x.fillStyle='rgba(255,215,0,0.35)';
      x.fillRect(px(70), py(160), px(30)-px(0), py(70)-py(160)); }

    // The three points (exact positions from your monopoly image)
    x.fillStyle='#cc0000'; x.beginPath(); x.arc(px(70), py(110),11,0,7); x.fill();  // C – MR=MC
    x.fillStyle='#0066ff'; x.beginPath(); x.arc(px(100), py(90),11,0,7); x.fill();  // D – min ATC
    x.fillStyle='#800000'; x.beginPath(); x.arc(px(70), py(160),11,0,7); x.fill();  // E – monopoly price
  }

  t++; requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
